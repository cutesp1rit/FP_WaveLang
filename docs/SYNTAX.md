# Синтаксис языка Wave

## Определение функций
**Синтаксис:** `имя ~ параметр ~ тело`.

**Пример:**
```wave
double ~ x ~ x * 2
```

## Паттерн-матчинг
**Синтаксис:** `имя ~ параметр` с условиями.

**Пример:**
```wave
factorial ~ n
  n = 0 ~ 1
  _ ~ n * factorial(n - 1)
```

## Арифметические операции
**Синтаксис:** `выражение оператор выражение`.

**Поддерживаемые операторы:** `+`, `-`, `*`, `/`.

**Пример:**
```wave
2 + 3 * 4
```

## Композиция функций
**Синтаксис:** `значение ~ функция1 ~ функция2`

**Описание:** Позволяет компоновать функции в цепочки. Выражение `x ~ f ~ g` эквивалентно `g(f(x))`.

**Пример:**
```wave
double ~ x ~ x * 2
addOne ~ x ~ x + 1

3 ~ double ~ addOne  // Результат: 7 (addOne(double(3)) = addOne(6) = 7)
```

## Списки
**Синтаксис:** `[элементы]`

**Описание:** Позволяет создавать списки элементов. Поддерживаются пустые списки и списки с элементами.

**Примеры:**
```wave
[]           // Пустой список
[1, 2, 3]    // Список чисел
[x, y, z]    // Список идентификаторов
```

## Операции со списками
**Синтаксис:** `[элементы] ~ операции`

**Описание:** Позволяет применять функции к спискам. Выражение `[элементы] ~ функция` эквивалентно `функция([элементы])`.

**Пример:**
```wave
double ~ x ~ x * 2

[1, 2, 3] ~ double  // Результат: double([1, 2, 3])
```

## Встроенные функции

### inc

**Синтаксис:** `inc(x)`

**Описание:** Увеличивает число на 1.

**Пример:**
```wave
inc(41)      // Результат: 42
[3, 10, 11] ~ inc   // [4, 11, 12]
```

### dec

**Синтаксис:** `dec(x)`

**Описание:** Уменьшает число на 1.

**Пример:**
```wave
dec(42)      // Результат: 41
```

### square

**Синтаксис:** `square(x)`

**Описание:** Возвращает квадрат числа.

**Пример:**
```wave
square(5)           // Результат: 25
[2, 4, 6] ~ square  // [4, 16, 36]
```

### sum

**Синтаксис:** `sum([список])`

**Описание:** Суммирует все элементы списка.

**Пример:**
```wave
sum([1, 2, 3])    // Результат: 6
```

### head

**Синтаксис:** `head([список])`

**Описание:** Возвращает первый элемент списка.

**Пример:**
```wave
head([10, 20, 30])   // Результат: 10
```

### tail

**Синтаксис:** `tail([список])`

**Описание:** Возвращает все элементы списка, кроме первого.

**Пример:**
```wave
tail([10, 20, 30])   // Результат: [20, 30]
```

### print

**Синтаксис:** `print(x)`

**Описание:** Печатает значение на экран.

**Пример:**
```wave
print(7 * 6)   // Выведет: 42
```

## Автоматическое поэлементное применение (map)

**Синтаксис:** `[a, b, ...] ~ функция`

**Описание:** Если функция применяется к списку, она автоматически применяется к каждому элементу (map).

**Пример:**
```wave
square ~ x ~ x * x
[2, 4, 6] ~ square    // Результат: [4, 16, 36]
```

## Элементы синтаксиса

### Идентификаторы
- Используются для именования функций и переменных.
- **Пример:** `x`, `factorial`.

### Операторы
- `~` — основной оператор для определения функций и композиции.
- `=` — используется в паттерн-матчинге для проверки условий.
- Арифметические операторы: `+`, `-`, `*`, `/`.

### Скобки
- Круглые скобки `()` — для вызова функций.
- Квадратные скобки `[]` — для создания списков.

---

## Примеры использования

Файл [examples/comprehensive.wave](../examples/comprehensive.wave) демонстрирует все реализованные функции:

```wave
// Определения функций
double ~ x ~ x * 2
addOne ~ x ~ x + 1
square ~ x ~ x * x

// Композиция функций
3 ~ double ~ addOne

// Списки и операции со списками
[1, 2, 3] ~ double
[1, 2, 3, 4, 5] ~ square
```

Все функции языка Wave полностью реализованы в текущей версии.